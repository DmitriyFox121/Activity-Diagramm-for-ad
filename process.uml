@startuml

|#lightgreen|Пользователь|
start
:Открыть учетеную запись;
:Заполнить данные для обьявления;
:Нажать "Опубликовать";

|#lightblue|Система|
:Проверить обьявление;
if (Все поля заполнены корректно?) then (нет)
 |Пользователь|
 :Исправить ошибки в обьявлении;
 :Нажать "Опубликовать";
 |Система|
 
else (да)
 :Создать обьявление;
endif

fork
  :Выставить обьявлению 
   статус "Созданно";
  fork again
  :Отправить обьявление 
   на модерацию;
 end fork;
|#orange|Модератор|
:Получить новое обьявление;
:Проверитиь обьявление;
if (обьявление соответсвует правилам?) then (нет)
  :Отменить размещение обьявления\n\t с указанием причины;
  |Пользователь|
   :Получить предупреждение;
   :Исправить анкету;
   :Нажать "Опубликовать";
   |Система|
     :Отправить обьявление на модерацию;
   |Модератор|
     :Получить обновленное обьявление;
     :Подтвердить создание обьявления;
else (да)
  :Подтвердить создание обьявления;

endif
 |Система|
 :Изменить статус обьявления на "Опубликованно";
 :Отпварить уведомление пользователю;
 |Пользователь|
 :Получить обьявление об успешной публикации;
stop

@enduml

